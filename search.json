[{"title":"zerotier搭建","date":"2024-11-21T08:57:10.661Z","url":"/2024/11/21/zerotier%E6%90%AD%E5%BB%BA/","categories":[["undefined",""]],"content":" 这是我对于自己在内网穿透学习时的一点小心得，使用的工具是ZeroTier ，它的优势在于可以在基本上全平台去使用，包含windows、Android、OpenWrt。我通过它让我可以在公司、家里、或者其它外部环境下，不管是使用电脑还是手机都可以做到互相访问数据以及一些本地的管理系统。它同时也给我带来了远程看番等一些好处，不过，实际上它的稳定性受到当地网络限制，我在使用SMB共享时，最高速率也就8.32 MBps.笔者推测是受到家庭网络影响，但是在看一集24分钟的mov格式下比特率不超过4000kbps的动画还是勉强够用的。这篇文章先是讲述我在进行ZeroTier搭建时的过程，以及一些问题。 ZeroTier网站设置 进入ZeroTier 进行注册，注册好后在创建界面点击 [create a network] ，点击新生成的 [network id]（记住这个id,它将是你的设备加入你的私人局域网的申请标签）进入到网络设置界面，在Settings-Basics-Name栏中给自己的网络命名，在Settings-Advanced模块里的[IPv4 Auto-Assign]中选择自己喜欢的网段，这个网段会作为你的隧道里的私人网段。 ZeroTier Windows设置 在ZeroTier 官网下载ZeroTier客户端，下载成功后在右下角点击 join new network,将上一步中的[network id]填入刚刚弹出的对话框，再单击join即可，然后我们回到ZeroTier 网站 ，在Members里会出现你的设备，通过左面选中后，在单击Authorize。这样你的windows设备就加入到你的私人网络里了，将系统分配给你的Managed IP记住。 ZeroTier Android设置 通过Google商店下载ZeroTier，打开app后点击➕，同样把[network id]输入到网络ID栏中，再点击添加网络，同上一步一样在网站中将你的手机设备进行认证，同样记住你的Managed IP。 现在你就拥有两台加入到私人网络的设备，可以尝试用电脑去ping手机的Managed IP，但是其实你会发现，有可能ping不通，或者延迟在2000ms左右，这是因为ZeroTier的服务器在国外，对于在国内打洞阻碍很多，所以接下来我们需要建立自己的moon节点，作为打洞的辅助，提升我们的使用体验。 ZeroTier moon服务器搭建 随便去一个大厂买一台便宜的配置最低的服务器，moon节点不会作为中转使用，只负责连接前的打洞，所以对于配置要求很低。装一个Ubuntu的系统，先把防火墙的9993的端口开放（udp、tcp）。进入到操作界面，安装curl. 再通过脚本下载ZeroTier 启动并开启自启 加入到网络 进入安装目录 生成节点配置(moon) 通过vi编辑配置，或者是你的云服务器自带的功能去编辑json的配置，进入到moon.json里，修改成公网IP地址，改成你买的服务器的地址 生成签名 此时应该会生成一个000000xxxxxx.moon的文件，创建一个moons.d的目录,将刚刚的000000xxxxxx.moon文件放入到moons.d中 重新启动ZeroTier服务 想办法把刚刚的000000xxxxxx.moon文件下载下来即可 Windows及Android系统moon文件导入 首先是windows,快捷键 Win+R，输入 services.msc，启动服务程序；找到 ZeroTier One 服务程序，右键属性找到可执行文件路径；在可执行路径下创建 moons.d 文件夹，将xxx.moon 拷贝到该文件夹下，然后再重启 ZeroTier One 服务。 此时可以通过cmd输入查看节点，若出现服务器 IP，即表示 moon 连接成功 手机的话通过app右上角的的按钮找到入轨，单击添加，从文件导入，选中刚刚的000000xxxxxx.moon即可。 此时通过右上角的按钮查看结点列表，如果看到节点类型为Moon中转的节点并且ip为你购买的服务器的公网地址则表明成功。 OpenWrt的moon文件导入 开启ZeroTier后，将moon服务器将生成的0000000xxxx.moon复制到&#x2F;etc&#x2F;zerotier&#x2F;moons.d 现在你可以在在任意节点，通过ping的方式查看延迟，网络环境好的情况下最低应在15ms左右。 下一篇我会介绍一下我自己在家搭建windows服务器时的过程以及碰到的问题。"}]